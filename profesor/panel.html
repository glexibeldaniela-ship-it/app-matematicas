<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Panel del Profesor</title>
</head>
<body>

  <h1>Panel del Profesor</h1>

  <input type="text" id="titulo" placeholder="TÃ­tulo de la guÃ­a">
  <br><br>

  <textarea id="descripcion" placeholder="DescripciÃ³n o contenido"></textarea>
  <br><br>

  <button id="publicar">Publicar</button>

  <script type="module">

    import { db } from "../js/firebase-config.js";
    import { addDoc, collection } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const btnPublicar = document.getElementById("publicar");

    btnPublicar.addEventListener("click", async () => {

      const titulo = document.getElementById("titulo").value;
      const descripcion = document.getElementById("descripcion").value;

      if (!titulo || !descripcion) {
        alert("Completa todos los campos");
        return;
      }

      try {
        await addDoc(collection(db, "guias"), {
          titulo: titulo,
          descripcion: descripcion,
          fecha: new Date()
        });

        alert("GuÃ­a publicada correctamente ðŸ”¥");

        document.getElementById("titulo").value = "";
        document.getElementById("descripcion").value = "";

      } catch (error) {
        console.error(error);
        alert("Error al publicar");
      }

    });

  </script>

</body>
</html>