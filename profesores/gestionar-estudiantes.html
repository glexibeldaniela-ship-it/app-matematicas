<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestionar Estudiantes</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#1e3a8a,#2563eb);
  color:white;
  padding:15px;
}

h2{
  text-align:center;
}

.form-box{
  background:rgba(255,255,255,0.1);
  padding:20px;
  border-radius:15px;
  margin-bottom:20px;
}

input, select{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:10px;
  border:none;
  font-size:15px;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}

.guardar{
  background:#22c55e;
  color:white;
}

.volver{
  background:#111827;
  color:white;
  margin-top:10px;
}

.lista{
  background:rgba(0,0,0,0.2);
  padding:15px;
  border-radius:15px;
}

.estudiante{
  background:rgba(255,255,255,0.1);
  padding:10px;
  border-radius:10px;
  margin-bottom:8px;
}
</style>
</head>

<body>

<h2>ðŸ“š Gestionar Estudiantes</h2>

<div class="form-box">

<input type="text" id="nombre" placeholder="Nombre y apellido" required>
<input type="text" id="cedula" placeholder="CÃ©dula" required>
<input type="email" id="correo" placeholder="Correo electrÃ³nico" required>

<select id="seccion">
<option value="">Seleccionar secciÃ³n</option>
<option>1A</option>
<option>1B</option>
<option>2A</option>
<option>2B</option>
<option>3A</option>
<option>3B</option>
</select>

<button class="guardar" onclick="guardarEstudiante()">
Guardar Estudiante
</button>

<button class="volver" onclick="volver()">
Volver al Panel
</button>

</div>

<div class="lista">
<h3>Lista de Estudiantes</h3>
<div id="listaEstudiantes"></div>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCqSVoNR5y3kXb-Aihf1UwmvTwo1T0xm_8",
  authDomain: "mateedupro2026-897fa.firebaseapp.com",
  projectId: "mateedupro2026-897fa",
  storageBucket: "mateedupro2026-897fa.firebasestorage.app",
  messagingSenderId: "242144964491",
  appId: "1:242144964491:web:04eb900f523a91ef66498e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.guardarEstudiante = async function(){

  const nombre = document.getElementById("nombre").value;
  const cedula = document.getElementById("cedula").value;
  const correo = document.getElementById("correo").value;
  const seccion = document.getElementById("seccion").value;

  if(!nombre || !cedula || !correo || !seccion){
    alert("Complete todos los campos");
    return;
  }

  await addDoc(collection(db, "estudiantes"),{
    nombre,
    cedula,
    correo,
    seccion,
    creado: new Date()
  });

  alert("Estudiante guardado");

  cargarEstudiantes();
}

window.volver = function(){
  window.location.href="../panel-profesor.html";
}

async function cargarEstudiantes(){

  const lista = document.getElementById("listaEstudiantes");
  lista.innerHTML = "";

  const querySnapshot = await getDocs(collection(db, "estudiantes"));

  querySnapshot.forEach((doc) => {
    const data = doc.data();

    lista.innerHTML += `
      <div class="estudiante">
        ${data.nombre} <br>
        C.I: ${data.cedula} <br>
        SecciÃ³n: ${data.seccion}
      </div>
    `;
  });

}

cargarEstudiantes();

</script>

</body>
</html>
